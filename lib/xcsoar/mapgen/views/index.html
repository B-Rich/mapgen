<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
  <xi:include href="layout.html"/>
  <head>
  </head>
  <body>
    <div>
      <ol>
	<li>Choose a name for the map.</li>
	<li>Enter your E-Mail address if you want to be informed when the map is ready.</li>
	<li>Upload a waypoints file (WinPilot/XCSoar format) which defines the map area or</li>
	<li>Select the map bounds by drawing a rectangle (press ctrl and click).</li>
      </ol>
    </div>
    <form action="${url('/generate')}" method="post" enctype="multipart/form-data">
      <div>
	<div py:if="defined('error')" class="error">${error}</div>
	<label for="name">Map name:</label>
        <input id="name" type="text" name="name"/>
        <label for="mail">E-Mail:</label>
        <input id="mail" type="text" name="mail"/>
        <label for="waypoint_file">Waypoint file:</label>
	<div class="box">
          <input id="waypoint_file" type="file" name="waypoint_file"/>
	</div>
        <label>Bounds:</label>
	<div class="box"><div id="map"/></div>
	<button type="submit">Generate</button>
	<input type="hidden" name="left"/>
	<input type="hidden" name="right"/>
	<input type="hidden" name="top"/>
	<input type="hidden" name="bottom"/>
      </div>
    </form>
    <script type="text/javascript" src="http://www.openlayers.org/api/OpenLayers.js"/>
    <script type="text/javascript" src="${url('/static/map.js')}"/>
  </body>
</html>
